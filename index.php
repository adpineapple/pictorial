<?php error_reporting(E_ERROR);

/*
|--------------------------------------------------------------------------
| Rewrite
|--------------------------------------------------------------------------
|
*/

$path = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);

if(!empty($path) && is_string($path) && strlen($path) > 1 && substr($path, -1) === '/')
{
	header("HTTP/1.1 301 Moved Permanently");
	header("Location: " . rtrim($path, '/'));

	die();
}

/*
|--------------------------------------------------------------------------
| Application Root Directory
|--------------------------------------------------------------------------
|
*/

define('ROOT', __DIR__);
define('TIME', time());

/*
|--------------------------------------------------------------------------
| Administration Access
|--------------------------------------------------------------------------
|
*/

if(!defined('TASK'))
{
	define('TASK', false);
}

if(!defined('CONSOLE'))
{
	define('CONSOLE', false);
}

/*
|--------------------------------------------------------------------------
| Register The Auto Loader
|--------------------------------------------------------------------------
|
*/

require ROOT . '/vendor/autoload.php';

/*
|--------------------------------------------------------------------------
| Turn On The Lights
|--------------------------------------------------------------------------
|
*/

$app = require_once ROOT . '/bootstrap/app.php';

/*
|--------------------------------------------------------------------------
| Run The Application
|--------------------------------------------------------------------------
|
*/

$response = $app->handle($request);

die();
